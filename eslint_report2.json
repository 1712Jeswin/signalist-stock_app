[{"filePath":"J:\\Projects\\stocks_app\\app\\(auth)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\(auth)\\sign-in\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\(auth)\\sign-up\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\(root)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\(root)\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\(root)\\watchlist\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[533,536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[533,536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { getWatchlistWithPrices, togglePinStock } from '@/lib/actions/watchlist.actions.server';\r\nimport { Pin, PinOff, Loader2 } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { FinancialGuidePanel } from '@/components/FinancialGuidePanel';\r\n\r\nexport default function WatchlistPage() {\r\n    const [items, setItems] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [pinLoading, setPinLoading] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        const fetchItems = async () => {\r\n            const res = await getWatchlistWithPrices();\r\n            if (res.data) {\r\n                setItems(res.data);\r\n            }\r\n            setLoading(false);\r\n        };\r\n        fetchItems();\r\n    }, []);\r\n\r\n    const handlePin = async (symbol: string, currentState: boolean) => {\r\n        setPinLoading(symbol);\r\n        const res = await togglePinStock(symbol, currentState);\r\n        if (res.success) {\r\n            setItems(prev => prev.map(i => {\r\n                if (i.symbol === symbol) {\r\n                    return { ...i, pinned: !currentState };\r\n                }\r\n                return i;\r\n            }).sort((a,b) => (b.pinned === a.pinned ? 0 : b.pinned ? 1 : -1)));\r\n        }\r\n        setPinLoading(null);\r\n    };\r\n\r\n    if (loading) return <div className=\"flex min-h-screen items-center justify-center\"><Loader2 className=\"animate-spin w-8 h-8 text-slate-500\" /></div>;\r\n\r\n    return (\r\n        <div className=\"container mx-auto py-8\">\r\n            <h1 className=\"text-3xl font-bold mb-8 text-white\">Your Watchlist</h1>\r\n            \r\n            {items.length === 0 ? (\r\n                <div className=\"text-slate-400\">No stocks in your watchlist. Search for stocks to add them.</div>\r\n            ) : (\r\n                <div className=\"bg-slate-900/50 rounded-xl border border-slate-800 overflow-hidden\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow className=\"border-slate-800 hover:bg-slate-800/50\">\r\n                                <TableHead className=\"text-slate-400\">Symbol</TableHead>\r\n                                <TableHead className=\"text-slate-400\">Company</TableHead>\r\n                                <TableHead className=\"text-right text-slate-400\">Actions (Pin to Guide)</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {items.map((item) => (\r\n                                <TableRow key={item.symbol} className=\"border-slate-800 hover:bg-slate-800/50\">\r\n                                    <TableCell className=\"font-medium text-slate-200\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            {item.pinned && <Pin size={14} className=\"text-indigo-400 rotate-45\" />}\r\n                                            {item.symbol}\r\n                                        </div>\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-slate-400\">{item.company}</TableCell>\r\n                                    <TableCell className=\"text-right\">\r\n                                        <Button\r\n                                            variant={item.pinned ? \"secondary\" : \"ghost\"}\r\n                                            size=\"sm\"\r\n                                            onClick={() => handlePin(item.symbol, item.pinned)}\r\n                                            disabled={pinLoading === item.symbol}\r\n                                            className={item.pinned ? \"bg-indigo-500/20 text-indigo-300 hover:bg-indigo-500/30\" : \"text-slate-500 hover:text-slate-300\"}\r\n                                        >\r\n                                            {pinLoading === item.symbol ? (\r\n                                                <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                                            ) : item.pinned ? (\r\n                                                <><PinOff className=\"w-4 h-4 mr-2\" /> Unpin</>\r\n                                            ) : (\r\n                                                <><Pin className=\"w-4 h-4 mr-2\" /> Pin</>\r\n                                            )}\r\n                                        </Button>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n            )}\r\n\r\n            {/* Financial Guide UI Tool */}\r\n            <FinancialGuidePanel />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\api\\chat\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2484,2487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2484,2487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3219,3222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3219,3222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport { processPinnedStocksData } from '@/lib/actions/ai.actions';\r\nimport { AI_FINANCIAL_GUIDE_PROMPT } from '@/lib/prompts.ai';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\nimport { connectToDatabase } from '@/database/mongoose';\r\nimport ChatSessionModel from '@/database/models/chatSession.model';\r\nimport { auth } from '@/lib/better-auth/auth';\r\nimport { headers } from 'next/headers';\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || process.env.NEXT_PUBLIC_GEMINI_API_KEY || '');\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const session = await auth.api.getSession({\r\n            headers: await headers()\r\n        })\r\n        const userId = session?.user?.id;\r\n        \r\n        if (!userId) {\r\n             return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n        }\r\n\r\n        const { message, sessionId } = await req.json();\r\n\r\n        if (!message) {\r\n            return NextResponse.json({ error: 'Message is required' }, { status: 400 });\r\n        }\r\n\r\n        await connectToDatabase();\r\n\r\n        // 1. Get Context Data\r\n        const res = await processPinnedStocksData();\r\n        const contextData = res.data;\r\n        \r\n        let contextJson = \"No pinned stocks available.\";\r\n        let symbols: string[] = [];\r\n        if (contextData) {\r\n            contextJson = JSON.stringify(contextData, null, 2);\r\n            symbols = contextData.map(d => d.symbol);\r\n        }\r\n\r\n        // 2. Prepare Chat Session\r\n        let chatSession;\r\n        if (sessionId) {\r\n            chatSession = await ChatSessionModel.findById(sessionId);\r\n        }\r\n        \r\n        if (!chatSession) {\r\n             chatSession = new ChatSessionModel({\r\n                 userId,\r\n                 contextSymbols: symbols,\r\n                 messages: []\r\n             });\r\n        }\r\n\r\n        // Add user message\r\n        chatSession.messages.push({\r\n             role: 'user',\r\n             content: message,\r\n             timestamp: new Date()\r\n        });\r\n\r\n        // 3. Prepare Gemini Prompt\r\n        const systemPrompt = AI_FINANCIAL_GUIDE_PROMPT\r\n            .replace('{{contextData}}', contextJson)\r\n            .replace('{{userQuestion}}', message);\r\n\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash-lite\" });\r\n\r\n        // Build history for the model\r\n        const history = chatSession.messages.slice(0, -1).map((m: any) => ({\r\n             role: m.role === 'assistant' ? 'model' as const : 'user' as const,\r\n             parts: [{ text: m.content }]\r\n        }));\r\n\r\n        const chat = model.startChat({ history });\r\n\r\n        // 4. Send Message & Get Response\r\n        const result = await chat.sendMessage(systemPrompt);\r\n        const responseText = result.response.text();\r\n\r\n        // 5. Save AI Response\r\n        chatSession.messages.push({\r\n            role: 'assistant',\r\n            content: responseText,\r\n            timestamp: new Date()\r\n        });\r\n\r\n        await chatSession.save();\r\n\r\n        return NextResponse.json({\r\n            sessionId: chatSession._id,\r\n            response: responseText\r\n        });\r\n\r\n    } catch (e: any) {\r\n        console.error('Chat API Error:', e);\r\n        return NextResponse.json({ error: e.message || 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\api\\health\\db\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\api\\inngest\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\api\\report\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1709,1712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1709,1712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport { processPinnedStocksData } from '@/lib/actions/ai.actions';\r\nimport { INVESTMENT_REPORT_PROMPT } from '@/lib/prompts.ai';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\nimport { auth } from '@/lib/better-auth/auth';\r\nimport { headers } from 'next/headers';\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || process.env.NEXT_PUBLIC_GEMINI_API_KEY || '');\r\n\r\nexport async function POST() {\r\n    try {\r\n         const session = await auth.api.getSession({\r\n            headers: await headers()\r\n        })\r\n        const userId = session?.user?.id;\r\n        \r\n        if (!userId) {\r\n             return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n        }\r\n\r\n        const res = await processPinnedStocksData();\r\n        \r\n        if (res.error) {\r\n            return NextResponse.json({ error: res.error }, { status: 400 });\r\n        }\r\n\r\n        const contextData = res.data;\r\n        if (!contextData || contextData.length === 0) {\r\n            return NextResponse.json({ content: \"No pinned stocks available to generate report.\" });\r\n        }\r\n\r\n        const contextJson = JSON.stringify(contextData, null, 2);\r\n\r\n        const prompt = INVESTMENT_REPORT_PROMPT.replace('{{contextData}}', contextJson);\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash-lite\" });\r\n\r\n        const result = await model.generateContent(prompt);\r\n        const responseText = result.response.text();\r\n\r\n        return NextResponse.json({\r\n            content: responseText,\r\n            rawData: contextData // Send raw data back for the PDF to format nicely\r\n        });\r\n\r\n    } catch (e: any) {\r\n        console.error('Report API Error:', e);\r\n        return NextResponse.json({ error: e.message || 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\FinancialGuidePanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Badge"},"fix":{"range":[222,268],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":51,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4277,4280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4277,4280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":151,"column":41,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6818,6859],"text":"Hi! I&apos;m your neutral financial explainer."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6818,6859],"text":"Hi! I&lsquo;m your neutral financial explainer."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6818,6859],"text":"Hi! I&#39;m your neutral financial explainer."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6818,6859],"text":"Hi! I&rsquo;m your neutral financial explainer."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":152,"column":91,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6917,6985],"text":"Ask me about your pinned stocks, like &quot;Why did AAPL move this week?\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6917,6985],"text":"Ask me about your pinned stocks, like &ldquo;Why did AAPL move this week?\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6917,6985],"text":"Ask me about your pinned stocks, like &#34;Why did AAPL move this week?\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6917,6985],"text":"Ask me about your pinned stocks, like &rdquo;Why did AAPL move this week?\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":152,"column":120,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6917,6985],"text":"Ask me about your pinned stocks, like \"Why did AAPL move this week?&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6917,6985],"text":"Ask me about your pinned stocks, like \"Why did AAPL move this week?&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6917,6985],"text":"Ask me about your pinned stocks, like \"Why did AAPL move this week?&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6917,6985],"text":"Ask me about your pinned stocks, like \"Why did AAPL move this week?&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Bot, FileText, X, Loader2, Send } from 'lucide-react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\n\r\nexport function FinancialGuidePanel() {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [messages, setMessages] = useState<{ role: 'user' | 'assistant', content: string }[]>([]);\r\n    const [inputStr, setInputStr] = useState('');\r\n    const [sessionId, setSessionId] = useState<string | null>(null);\r\n    const [isThinking, setIsThinking] = useState(false);\r\n    \r\n    // PDF Generation\r\n    const [isGeneratingPdf, setIsGeneratingPdf] = useState(false);\r\n    \r\n    const handleChatToggle = () => setIsOpen(!isOpen);\r\n\r\n    const handleSendMessage = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!inputStr.trim()) return;\r\n\r\n        const userMsg = inputStr.trim();\r\n        setInputStr('');\r\n        setMessages(prev => [...prev, { role: 'user', content: userMsg }]);\r\n        setIsThinking(true);\r\n\r\n        try {\r\n            const res = await fetch('/api/chat', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ message: userMsg, sessionId })\r\n            });\r\n\r\n            const data = await res.json();\r\n            \r\n            if (data.error) {\r\n                 setMessages(prev => [...prev, { role: 'assistant', content: 'Connection Error: ' + data.error }]);\r\n                 setIsThinking(false);\r\n                 return;\r\n            }\r\n\r\n            if (data.sessionId) setSessionId(data.sessionId);\r\n            \r\n            setMessages(prev => [...prev, { role: 'assistant', content: data.response }]);\r\n            \r\n        } catch(e) {\r\n            setMessages(prev => [...prev, { role: 'assistant', content: 'There was an error reaching your financial guide. Please try again later.' }]);\r\n        } finally {\r\n            setIsThinking(false);\r\n        }\r\n    };\r\n\r\n    const handleGenerateReport = async () => {\r\n         setIsGeneratingPdf(true);\r\n         try {\r\n             const res = await fetch('/api/report', { method: 'POST' });\r\n             const data = await res.json();\r\n             \r\n             if (data.error) throw new Error(data.error);\r\n             \r\n             // Create temporary div for formatting\r\n             const div = document.createElement('div');\r\n             div.innerHTML = `\r\n                <div style=\"padding: 40px; font-family: sans-serif; background: #ffffff; color: #111;\">\r\n                    <h1 style=\"font-size: 24px; color: #2563eb; margin-bottom: 20px;\">Personalized Investment Progress Report</h1>\r\n                    <p style=\"color: #666; font-size: 14px; margin-bottom: 40px;\">Generated on: ${new Date().toLocaleString()}</p>\r\n                    <div style=\"font-size: 16px; line-height: 1.6; white-space: pre-wrap;\">\r\n                        ${data.content}\r\n                    </div>\r\n                    <div style=\"margin-top: 50px; font-size: 12px; color: #888; border-top: 1px solid #eee; padding-top: 20px;\">\r\n                        Disclaimer: This report is for informational purposes only. It does not constitute financial advice, and should not be relied upon for making investment decisions.\r\n                    </div>\r\n                </div>\r\n             `;\r\n             \r\n             div.style.position = 'absolute';\r\n             div.style.left = '-9999px';\r\n             div.style.width = '800px';\r\n             document.body.appendChild(div);\r\n\r\n             const canvas = await html2canvas(div, { scale: 2 });\r\n             const imgData = canvas.toDataURL('image/png');\r\n             \r\n             document.body.removeChild(div);\r\n\r\n             const pdf = new jsPDF('p', 'mm', 'a4');\r\n             const pdfWidth = pdf.internal.pageSize.getWidth();\r\n             const pdfHeight = (canvas.height * pdfWidth) / canvas.width;\r\n             \r\n             pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\r\n             pdf.save('Investment_Progress_Report.pdf');\r\n\r\n         } catch(e: any) {\r\n             alert('Failed to generate report: ' + (e.message || 'Unknown error'));\r\n         } finally {\r\n             setIsGeneratingPdf(false);\r\n         }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed bottom-6 right-6 z-50 flex flex-col items-end gap-4\">\r\n            \r\n            {/* Action Buttons (Always Visible) */}\r\n            <div className=\"flex gap-2\">\r\n                <Button \r\n                    variant=\"default\" \r\n                    className=\"bg-blue-600 hover:bg-blue-700 shadow-xl\"\r\n                    onClick={handleGenerateReport}\r\n                    disabled={isGeneratingPdf}\r\n                >\r\n                    {isGeneratingPdf ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : <FileText className=\"w-4 h-4 mr-2\" />}\r\n                    Download Report\r\n                </Button>\r\n\r\n                {!isOpen && (\r\n                    <Button \r\n                        variant=\"secondary\" \r\n                        className=\"shadow-xl px-4 py-6 rounded-full\"\r\n                        onClick={handleChatToggle}\r\n                    >\r\n                        <Bot className=\"w-5 h-5 mr-2 text-indigo-400\" />\r\n                        Ask Your Guide\r\n                    </Button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Chat Window */}\r\n            {isOpen && (\r\n                <div className=\"w-[380px] h-[500px] bg-slate-900 border border-slate-700/50 rounded-2xl shadow-2xl flex flex-col animate-in slide-in-from-bottom-5\">\r\n                    \r\n                    {/* Header */}\r\n                    <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-800 bg-slate-900/80 rounded-t-2xl\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Bot className=\"w-5 h-5 text-indigo-400\" />\r\n                            <h3 className=\"font-semibold text-slate-200\">Financial Guide</h3>\r\n                        </div>\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={handleChatToggle} className=\"h-8 w-8 text-slate-400 hover:text-white hover:bg-slate-800\">\r\n                            <X className=\"w-4 h-4\" />\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {/* Chat Area */}\r\n                    <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n                         {messages.length === 0 && (\r\n                            <div className=\"text-center mt-10 text-slate-500 text-sm\">\r\n                                <p>Hi! I'm your neutral financial explainer.</p>\r\n                                <p className=\"mt-2\">Ask me about your pinned stocks, like \"Why did AAPL move this week?\"</p>\r\n                            </div>\r\n                         )}\r\n\r\n                         {messages.map((m, idx) => (\r\n                             <div key={idx} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                                 <div className={`max-w-[85%] rounded-xl px-4 py-2 ${\r\n                                     m.role === 'user' \r\n                                     ? 'bg-blue-600 text-white' \r\n                                     : 'bg-slate-800 text-slate-200 text-sm leading-relaxed border border-slate-700/50'\r\n                                 }`}>\r\n                                     {m.content}\r\n                                 </div>\r\n                             </div>\r\n                         ))}\r\n\r\n                         {isThinking && (\r\n                             <div className=\"flex justify-start\">\r\n                                 <div className=\"bg-slate-800 text-slate-400 rounded-xl px-4 py-2 text-sm flex items-center gap-2\">\r\n                                     <Loader2 className=\"w-3 h-3 animate-spin\" /> Thinking...\r\n                                 </div>\r\n                             </div>\r\n                         )}\r\n                    </div>\r\n\r\n                    {/* Input */}\r\n                    <form onSubmit={handleSendMessage} className=\"p-3 border-t border-slate-800 bg-slate-900/50 rounded-b-2xl\">\r\n                        <div className=\"flex gap-2 relative\">\r\n                            <Input \r\n                                value={inputStr}\r\n                                onChange={(e) => setInputStr(e.target.value)}\r\n                                placeholder=\"Ask about your pinned stocks...\" \r\n                                className=\"bg-slate-800/50 border-slate-700 text-slate-200 placeholder:text-slate-500 pr-10 focus-visible:ring-1 focus-visible:ring-indigo-500\"\r\n                            />\r\n                            <Button type=\"submit\" size=\"icon\" disabled={!inputStr.trim() || isThinking} className=\"absolute right-1 top-1 h-7 w-7 bg-indigo-500 hover:bg-indigo-600\">\r\n                                <Send className=\"w-3 h-3 text-white\" />\r\n                            </Button>\r\n                        </div>\r\n                        <div className=\"text-center mt-2\">\r\n                             <span className=\"text-[10px] text-slate-500\">I do not provide financial advice.</span>\r\n                        </div>\r\n                    </form>\r\n\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\NavItems.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\SearchCommand.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\TradingViewWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\UserDropdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\forms\\CountrySelectField.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[763,766],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[763,766],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\forms\\FooterLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\forms\\InputField.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\forms\\SelectField.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\button-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\empty.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\field.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\input-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\item.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\kbd.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\navigation-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\sidebar.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nJ:\\Projects\\stocks_app\\components\\ui\\sidebar.tsx:612:26\n  610 |   const width = React.useMemo(() => {\n  611 |       // eslint-disable-next-line react-hooks/purity\n> 612 |     return `${Math.floor(Math.random() * 40) + 50}%`\n      |                          ^^^^^^^^^^^^^ Cannot call impure function\n  613 |   }, [])\n  614 |\n  615 |   return (","line":612,"column":26,"nodeType":null,"endLine":612,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\spinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\database\\models\\chatSession.model.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\database\\models\\watchlist.model.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\database\\mongoose.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\hooks\\use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\hooks\\useDebounce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\hooks\\useTradingViewWidget.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'containerRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'containerRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":26,"column":41,"nodeType":"Identifier","endLine":26,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\actions\\ai.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\actions\\auth.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\actions\\finnhub.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\actions\\user.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\actions\\watchlist.actions.server.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1044,1047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1044,1047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\r\n\r\nimport { connectToDatabase } from '@/database/mongoose';\r\nimport Watchlist from '@/database/models/watchlist.model';\r\nimport { auth } from '@/lib/better-auth/auth';\r\nimport { headers } from 'next/headers';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function togglePinStock(symbol: string, currentPinnedState: boolean) {\r\n    try {\r\n        const session = await auth.api.getSession({\r\n            headers: await headers()\r\n        })\r\n        const userId = session?.user?.id;\r\n        if (!userId) {\r\n            return { error: 'Unauthorized' };\r\n        }\r\n\r\n        await connectToDatabase();\r\n        \r\n        await Watchlist.findOneAndUpdate(\r\n            { userId, symbol: symbol.toUpperCase() },\r\n            { \r\n                $set: { \r\n                    pinned: !currentPinnedState,\r\n                    pinnedAt: !currentPinnedState ? new Date() : null\r\n                } \r\n            }\r\n        );\r\n\r\n        revalidatePath('/watchlist');\r\n        return { success: true };\r\n    } catch (e: any) {\r\n         console.error('Error toggling pin:', e);\r\n         return { error: 'Failed to update pin status' };\r\n    }\r\n}\r\n\r\nexport async function getWatchlistWithPrices() {\r\n   try {\r\n        const session = await auth.api.getSession({\r\n            headers: await headers()\r\n        })\r\n        const userId = session?.user?.id;\r\n        if (!userId) return { error: 'Unauthorized' };\r\n\r\n        await connectToDatabase();\r\n        \r\n        const items = await Watchlist.find({ userId }).sort({ pinned: -1, addedAt:-1 }).lean();\r\n        \r\n        return { data: items.map(i => ({\r\n            symbol: i.symbol,\r\n            company: i.company,\r\n            pinned: i.pinned || false,\r\n            pinnedAt: i.pinnedAt ? i.pinnedAt.toISOString() : null\r\n        })) };\r\n   } catch(e) {\r\n       console.error('Error fetching watchlist:', e);\r\n       return { error: 'Failed to fetch watchlist' };\r\n   }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\actions\\watchlist.actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\better-auth\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\inngest\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\inngest\\functions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\inngest\\prompts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\nodemailer\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\nodemailer\\templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\prompts.ai.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\middleware\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\scripts\\test-db.js","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":9,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":9,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":11,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":11,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":13,"column":18,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":13,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"J:\\Projects\\stocks_app\\types\\global.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
